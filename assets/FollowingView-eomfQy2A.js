const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/OpenUserDialog-DwG3rgCa.js","assets/index-CFDL-CVp.js","assets/index-CIwtCw06.css","assets/MyButton.vue_vue_type_script_setup_true_lang-BrbV-gT4.js"])))=>i.map(i=>d[i]);
import{Q as g}from"./QScrollArea-D_N-OP8b.js";import{j as m,u as y,E as d,p,o as v,m as r,l,s as b,t as k,H as _,_ as C,J as x,L as $,w as c,n as S,bO as D}from"./index-CFDL-CVp.js";import{_ as B}from"./MyVirtualScroll.vue_vue_type_script_setup_true_lang-rXOZgMlD.js";import{_ as E}from"./MyButton.vue_vue_type_script_setup_true_lang-BrbV-gT4.js";import{_ as V}from"./RectSkeleton.vue_vue_type_script_setup_true_lang-Bhv09ipN.js";import"./QScrollObserver-DN6LsUr8.js";const z={class:"card user-card horizontal-container"},A={class:"avatar-container"},L={class:"display-name"},M={class:"username"},O=m({__name:"UserCard",props:{user:{}},setup(f){const t=k(()=>C(()=>import("./OpenUserDialog-DwG3rgCa.js"),__vite__mapDeps([0,1,2,3]))),n=y(),e=d(f.user);async function u(){const o=e.value.followed;try{o?(delete e.value.followed,await x(e.value.user_id)):(e.value.followed=!0,await $(e.value.user_id))}catch{o?e.value.followed=!0:delete e.value.followed}}function a(){n.openDialog("user",e.value.user_id,{user:e.value})}return(o,s)=>(v(),p("div",z,[r("div",A,[l(b(t),{user:e.value},null,8,["user"])]),r("div",{class:"container name-container",onClick:a},[r("div",L,_(e.value.display_name||e.value.username),1),r("div",M,"@"+_(e.value.username),1)]),l(E,{label:e.value.followed?o.$t("unfollow"):o.$t("follow"),"no-caps":"",unelevated:"",icon:"add",class:"follow-button",type:e.value.followed?"outlined":"primary",onClick:u},null,8,["label","type"])]))}}),q={class:"container full-height"},j=m({__name:"FollowingView",setup(f){const t=d([]),n=d(null);let i;async function e(u,a){try{const o=await D(i);if(o.data.success){const s=o.data.data;i=s.next_cursor;const w=s.following.map(h=>({followed:!0,...h}));t.value.push(...w),a(!s.has_more)}else a(!0)}catch{a(!0)}}return(u,a)=>(v(),p("div",q,[l(g,{class:"scroll-area full-height fix-scroll-area",visible:!1},{default:c(()=>[l(B,{items:t.value,"item-key":"user_id","infinite-load-type":"bottom",margins:8,onLoadMore:e,ref_key:"virtualScroll",ref:n,"min-item-height":58,"skeleton-height":58,"no-resize-observer":!0},{default:c(({item:o,index:s})=>[l(O,{user:o,class:S({"q-mb-sm":s+1<t.value.length})},null,8,["user","class"])]),skeleton:c(()=>[l(V,{height:"58px",class:"card q-mb-sm"})]),_:1},8,["items"])]),_:1})]))}});export{j as default};
