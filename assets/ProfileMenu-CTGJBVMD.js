import{j as S,a2 as V,u as A,E as f,W as k,F as B,p as M,o as b,O as d,l as o,k as P,w as C,m as c,H as y,n,s as m,R as E}from"./index-CFDL-CVp.js";import{C as p}from"./ClosePopup-jbb-qhvq.js";import{u as N}from"./profile-store-3JWJIDcz.js";import{_ as Q}from"./MySwitch.vue_vue_type_script_setup_true_lang-B1tWa7Bn.js";import{_ as i}from"./MyButton.vue_vue_type_script_setup_true_lang-BrbV-gT4.js";import{_ as U}from"./UserAvatar.vue_vue_type_script_setup_true_lang-9AcvX9BO.js";const j={class:"container profile-menu-component"},q={class:"text-container"},z={class:"label"},F={class:"username"},K=S({__name:"ProfileMenu",props:{buttonsClass:{}},emits:["close-menu"],setup(H,{emit:_}){const r=V(),u=A(),$=N(),t=f(),l=f(r.dark.isActive);k(l,e=>{r.dark.isActive!=e&&r.dark.set(e)}),k(()=>r.dark.isActive,e=>{l.value=e});async function g(){t.value=await $.getProfile()}const w=_;function D(...e){u.openDialog(...e),w("close-menu")}return B(g),(e,s)=>{var v;return b(),M("div",j,[d((b(),P(i,{type:"card",class:n(["open-profile",e.buttonsClass]),key:((v=t.value)==null?void 0:v.user_id)||0,onClick:s[0]||(s[0]=a=>D("user",t.value.user_id,{user:t.value}))},{default:C(()=>{var a;return[o(U,{user:t.value},null,8,["user"]),c("div",q,[c("div",z,y(e.$t("view_profile")),1),c("div",F,y(`@${((a=t.value)==null?void 0:a.username)||"unknown"}`),1)])]}),_:1},8,["class"])),[[p]]),o(i,{type:"card",class:n(["dark-mode",e.buttonsClass]),icon:"dark_mode",label:e.$t("dark_mode"),onClick:s[2]||(s[2]=a=>l.value=!l.value)},{append:C(()=>[o(Q,{modelValue:l.value,"onUpdate:modelValue":s[1]||(s[1]=a=>l.value=a)},null,8,["modelValue"])]),_:1},8,["class","label"]),d(o(i,{type:"card",class:n(["create-post",e.buttonsClass]),icon:"add_circle",label:e.$t("create_post"),onClick:s[3]||(s[3]=a=>m(u).openDialog("postEditor","",{}))},null,8,["class","label"]),[[p]]),d(o(i,{type:"card",class:n(["my-activity",e.buttonsClass]),icon:"browse_activity",label:e.$t("my_activity"),onClick:s[4]||(s[4]=a=>m(u).openDialog("myActivity","",{}))},null,8,["class","label"]),[[p]]),o(E),d(o(i,{type:"card",class:n(["settings",e.buttonsClass]),icon:"settings",label:e.$t("settings"),onClick:s[5]||(s[5]=a=>m(u).openDialog("settings","",{}))},null,8,["class","label"]),[[p]])])}}});export{K as default};
