const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MyImage-DRdgtf8R.js","assets/MyImage.vue_vue_type_script_setup_true_lang-CQ8ernJE.js","assets/index-CFDL-CVp.js","assets/index-CIwtCw06.css","assets/MyCarousel-DaDkViIP.js","assets/MyButton.vue_vue_type_script_setup_true_lang-BrbV-gT4.js","assets/MyVideoPlayer-Dnq2BTS7.js","assets/OpenUserDialog-DwG3rgCa.js","assets/PostMoreMenu-XoH-OAKx.js","assets/ClosePopup-jbb-qhvq.js","assets/profile-store-3JWJIDcz.js","assets/MyItem.vue_vue_type_script_setup_true_lang-BiqkFfnH.js","assets/format-CB8cfGO0.js","assets/PostEditor-nvmptCvH.js","assets/QSpace-Bx2Tzmy6.js","assets/QMenu-BeQtP8gf.js","assets/QScrollArea-D_N-OP8b.js","assets/QScrollObserver-DN6LsUr8.js","assets/use-dialog-plugin-component-CjaeI9jv.js","assets/ToggleCard.vue_vue_type_script_setup_true_lang-BWDlh5WY.js","assets/MySwitch.vue_vue_type_script_setup_true_lang-B1tWa7Bn.js","assets/MyChip.vue_vue_type_script_setup_true_lang-CbjpEi4x.js","assets/CloseableContent.vue_vue_type_script_setup_true_lang-B4TJvAi3.js"])))=>i.map(i=>d[i]);
import{j as F,u as H,V as K,E as A,p as a,o as t,n as $,m as _,q as c,k as d,l as o,s as n,t as r,H as G,w as g,G as k,I as h,_ as u,a2 as U,bf as J}from"./index-CFDL-CVp.js";import{Q as W}from"./QSpace-Bx2Tzmy6.js";import{Q as X}from"./QMenu-BeQtP8gf.js";import{a as Y,b as Z}from"./format-CB8cfGO0.js";import{i18n as ee}from"./i18n-BoPRfTTY.js";import{_ as te,a as se}from"./ReactionButtons.vue_vue_type_script_setup_true_lang-Bl9fB1-t.js";import{_ as T}from"./MyChip.vue_vue_type_script_setup_true_lang-CbjpEi4x.js";import{a as ae,_ as D}from"./MyButton.vue_vue_type_script_setup_true_lang-BrbV-gT4.js";const oe={class:"content-section card-section"},ie={key:0,class:"avatar-container"},ne={class:"text-container"},le={key:0,class:"username"},ce={key:0,class:"post-file-section card-section"},re={key:1,class:"tags tags-section card-section"},ue={class:"reaction-buttons"},_e={class:"action-container"},de={class:"action-container circle"},me={key:3,class:"actions card-section"},De=F({__name:"PostComponent",props:{post:{},inDialog:{type:Boolean}},emits:["deletePost"],setup(w,{emit:R}){const L=r(()=>u(()=>import("./MyImage-DRdgtf8R.js"),__vite__mapDeps([0,1,2,3]))),O=r(()=>u(()=>import("./MyCarousel-DaDkViIP.js"),__vite__mapDeps([4,2,3,5]))),x=r(()=>u(()=>import("./MyVideoPlayer-Dnq2BTS7.js"),__vite__mapDeps([6,2,3,5]))),M=r(()=>u(()=>import("./OpenUserDialog-DwG3rgCa.js"),__vite__mapDeps([7,2,3,5]))),z=r(()=>u(()=>import("./PostMoreMenu-XoH-OAKx.js"),__vite__mapDeps([8,2,3,9,10,11,5,12]))),B=r(()=>u(()=>import("./PostEditor-nvmptCvH.js"),__vite__mapDeps([13,14,2,3,15,16,17,18,10,19,20,5,21,22]))),f=U(),m=H(),N=R,b=w,e=K(b.post),l=A(!1),P=A(!1);function Q(){P.value=!0}function S(){b.inDialog||m.openDialog("post",e.value.post_id,{post:e.value})}async function j(){const{t:i}=ee.global;try{await J(e.value.post_id),f.notify({type:"default-notification",progress:!0,icon:"sym_r_delete_forever",message:i("post_deleted.msg"),caption:i("post_deleted.caption")}),N("deletePost",e.value.post_id),l.value=!0}catch(p){throw f.notify({type:"error-notification",progress:!0,message:i("post_deleted.failed")}),p}}function q(i,p){switch(i){case"delete":m.openDialog("okCancel","",{localeKey:"delete_post_dialog",okKey:"delete",okType:"attention",okIcon:"delete_forever"},()=>void j());break;case"edit":f.dialog({component:B,componentProps:{originalPost:b.post}});break;case"report":m.openDialog("report","",{targetType:"post",targetId:e.value.post_id});break;case"copy_id":navigator.clipboard.writeText(p);break}}return(i,p)=>{var E,C,I;return t(),a("div",{class:$(["post card",{"is-system":e.value.is_system}]),key:e.value.post_id},[_("div",oe,[e.value.is_system?c("",!0):(t(),a("div",ie,[o(n(M),{user:e.value.user},null,8,["user"])])),e.value.is_system?(t(),d(ae,{key:1,icon:"chat_info"})):c("",!0),_("div",ne,[e.value.is_system?c("",!0):(t(),a("div",le,G(e.value.user.username),1)),o(te,{class:"content wrap-text",text:n(Y)(e.value.content),html:!0},null,8,["text"])])]),!e.value.is_system&&((E=e.value.media)==null?void 0:E.length)>0?(t(),a("div",ce,[e.value.media_type=="post_image"?(t(),d(n(O),{key:0,class:"post-image",slides:e.value.media.sort()},{default:g(({data:s})=>[o(n(L),{src:s},null,8,["src"])]),_:1},8,["slides"])):e.value.media_type=="post_video"?(t(),d(n(x),{key:1,src:e.value.media[0]},null,8,["src"])):c("",!0)])):c("",!0),!e.value.is_system&&(((C=e.value.tags)==null?void 0:C.length)>0||((I=e.value.ctags)==null?void 0:I.length)>0)?(t(),a("div",re,[(t(!0),a(k,null,h(e.value.ctags,(s,v)=>(t(),d(T,{key:v,class:"tag",icon:"tag",disable:l.value,onClick:y=>n(m).openDialog("tag",s,{tagName:s}),label:s,clickable:!0},null,8,["disable","onClick","label"]))),128)),(t(!0),a(k,null,h(e.value.tags,(s,v)=>{var y,V;return t(),d(T,{key:v,class:"tag",icon:((y=i.$tagsInfo.value[s])==null?void 0:y.icon)||"experiment",disable:l.value,label:((V=i.$tagsInfo.value[s])==null?void 0:V.name)||s},null,8,["icon","disable","label"])}),128))])):c("",!0),e.value.is_system?e.value.actions?(t(),a("div",me,[(t(!0),a(k,null,h(e.value.actions,s=>(t(),a("div",{class:"action-container",key:s.name},[o(D,{icon:s.icon,label:i.$t(s.name),class:"round button",size:"sm",onClick:v=>s.func(),disable:l.value},null,8,["icon","label","onClick","disable"])]))),128))])):c("",!0):(t(),a("div",{key:2,class:$(["actions card-section",{"can-animate":P.value}])},[_("div",ue,[o(se,{object:e.value,"before-action":Q,"is-comment":!1,disable:l.value},null,8,["object","disable"])]),_("div",_e,[o(D,{icon:"chat_bubble",label:n(Z)(e.value.comments_count),class:"comments round button",size:"sm",onClick:S,disable:l.value},null,8,["label","disable"])]),o(W),_("div",de,[o(D,{icon:"more_horiz",class:"more button circle",size:"sm",disable:l.value},{default:g(()=>[o(X,{class:"post-more-menu",self:"top right"},{default:g(()=>[o(n(z),{post:e.value,onAction:q},null,8,["post"])]),_:1})]),_:1},8,["disable"])])],2))],2)}}});export{De as _};
