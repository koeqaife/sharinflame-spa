import{x as $,h as l,B as u,C as W,A as V,aw as _,ax as S,ay as F,E as m,W as p,M as U,az as A,aq as E,aA as I,aB as B,aC as K,aD as x,X as M,aE as N}from"./index-Ck4zLN3I.js";import{Q as T,a as j}from"./QScrollObserver-IHi_X4zs.js";const k=$({name:"QToolbar",props:{inset:Boolean},setup(e,{slots:y}){const c=l(()=>"q-toolbar row no-wrap items-center"+(e.inset===!0?" q-toolbar--inset":""));return()=>u("div",{class:c.value,role:"toolbar"},W(y.default))}}),G=$({name:"QHeader",props:{modelValue:{type:Boolean,default:!0},reveal:Boolean,revealOffset:{type:Number,default:250},bordered:Boolean,elevated:Boolean,heightHint:{type:[String,Number],default:50}},emits:["reveal","focusin"],setup(e,{slots:y,emit:c}){const{proxy:{$q:o}}=V(),n=_(F,S);if(n===S)return console.error("QHeader needs to be child of QLayout"),S;const i=m(parseInt(e.heightHint,10)),d=m(!0),z=l(()=>e.reveal===!0||n.view.value.indexOf("H")!==-1||o.platform.is.ios&&n.isContainer.value===!0),b=l(()=>{if(e.modelValue!==!0)return 0;if(z.value===!0)return d.value===!0?i.value:0;const t=i.value-n.scroll.value.position;return t>0?t:0}),s=l(()=>e.modelValue!==!0||z.value===!0&&d.value!==!0),C=l(()=>e.modelValue===!0&&s.value===!0&&e.reveal===!0),Q=l(()=>"q-header q-layout__section--marginal "+(z.value===!0?"fixed":"absolute")+"-top"+(e.bordered===!0?" q-header--bordered":"")+(s.value===!0?" q-header--hidden":"")+(e.modelValue!==!0?" q-layout--prevent-focus":"")),L=l(()=>{const t=n.rows.value.top,v={};return t[0]==="l"&&n.left.space===!0&&(v[o.lang.rtl===!0?"right":"left"]=`${n.left.size}px`),t[2]==="r"&&n.right.space===!0&&(v[o.lang.rtl===!0?"left":"right"]=`${n.right.size}px`),v});function f(t,v){n.update("header",t,v)}function w(t,v){t.value!==v&&(t.value=v)}function H({height:t}){w(i,t),f("size",t)}function R(t){C.value===!0&&w(d,!0),c("focusin",t)}p(()=>e.modelValue,t=>{f("space",t),w(d,!0),n.animate()}),p(b,t=>{f("offset",t)}),p(()=>e.reveal,t=>{t===!1&&w(d,e.modelValue)}),p(d,t=>{n.animate(),c("reveal",t)}),p(n.scroll,t=>{e.reveal===!0&&w(d,t.direction==="up"||t.position<=e.revealOffset||t.position-t.inflectionPoint<100)});const q={};return n.instances.header=q,e.modelValue===!0&&f("size",i.value),f("space",e.modelValue),f("offset",b.value),U(()=>{n.instances.header===q&&(n.instances.header=void 0,f("size",0),f("offset",0),f("space",!1))}),()=>{const t=A(y.default,[]);return e.elevated===!0&&t.push(u("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),t.push(u(T,{debounce:0,onResize:H})),u("header",{class:Q.value,style:L.value,onFocusin:R},t)}}}),J=$({name:"QPageContainer",setup(e,{slots:y}){const{proxy:{$q:c}}=V(),o=_(F,S);if(o===S)return console.error("QPageContainer needs to be child of QLayout"),S;E(I,!0);const n=l(()=>{const i={};return o.header.space===!0&&(i.paddingTop=`${o.header.size}px`),o.right.space===!0&&(i[`padding${c.lang.rtl===!0?"Left":"Right"}`]=`${o.right.size}px`),o.footer.space===!0&&(i.paddingBottom=`${o.footer.size}px`),o.left.space===!0&&(i[`padding${c.lang.rtl===!0?"Right":"Left"}`]=`${o.left.size}px`),i});return()=>u("div",{class:"q-page-container",style:n.value},W(y.default))}}),Y=$({name:"QLayout",props:{container:Boolean,view:{type:String,default:"hhh lpr fff",validator:e=>/^(h|l)h(h|r) lpr (f|l)f(f|r)$/.test(e.toLowerCase())},onScroll:Function,onScrollHeight:Function,onResize:Function},setup(e,{slots:y,emit:c}){const{proxy:{$q:o}}=V(),n=m(null),i=m(o.screen.height),d=m(e.container===!0?0:o.screen.width),z=m({position:0,direction:"down",inflectionPoint:0}),b=m(0),s=m(K.value===!0?0:B()),C=l(()=>"q-layout q-layout--"+(e.container===!0?"containerized":"standard")),Q=l(()=>e.container===!1?{minHeight:o.screen.height+"px"}:null),L=l(()=>s.value!==0?{[o.lang.rtl===!0?"left":"right"]:`${s.value}px`}:null),f=l(()=>s.value!==0?{[o.lang.rtl===!0?"right":"left"]:0,[o.lang.rtl===!0?"left":"right"]:`-${s.value}px`,width:`calc(100% + ${s.value}px)`}:null);function w(a){if(e.container===!0||document.qScrollPrevented!==!0){const r={position:a.position.top,direction:a.direction,directionChanged:a.directionChanged,inflectionPoint:a.inflectionPoint.top,delta:a.delta.top};z.value=r,e.onScroll!==void 0&&c("scroll",r)}}function H(a){const{height:r,width:g}=a;let h=!1;i.value!==r&&(h=!0,i.value=r,e.onScrollHeight!==void 0&&c("scrollHeight",r),q()),d.value!==g&&(h=!0,d.value=g),h===!0&&e.onResize!==void 0&&c("resize",a)}function R({height:a}){b.value!==a&&(b.value=a,q())}function q(){if(e.container===!0){const a=i.value>b.value?B():0;s.value!==a&&(s.value=a)}}let t=null;const v={instances:{},view:l(()=>e.view),isContainer:l(()=>e.container),rootRef:n,height:i,containerHeight:b,scrollbarWidth:s,totalWidth:l(()=>d.value+s.value),rows:l(()=>{const a=e.view.toLowerCase().split(" ");return{top:a[0].split(""),middle:a[1].split(""),bottom:a[2].split("")}}),header:x({size:0,offset:0,space:!1}),right:x({size:300,offset:0,space:!1}),footer:x({size:0,offset:0,space:!1}),left:x({size:300,offset:0,space:!1}),scroll:z,animate(){t!==null?clearTimeout(t):document.body.classList.add("q-body--layout-animate"),t=setTimeout(()=>{t=null,document.body.classList.remove("q-body--layout-animate")},155)},update(a,r,g){v[a][r]=g}};if(E(F,v),B()>0){let a=function(){h=null,P.classList.remove("hide-scrollbar")},r=function(){if(h===null){if(P.scrollHeight>o.screen.height)return;P.classList.add("hide-scrollbar")}else clearTimeout(h);h=setTimeout(a,300)},g=function(O){h!==null&&O==="remove"&&(clearTimeout(h),a()),window[`${O}EventListener`]("resize",r)},h=null;const P=document.body;p(()=>e.container!==!0?"add":"remove",g),e.container!==!0&&g("add"),M(()=>{g("remove")})}return()=>{const a=N(y.default,[u(j,{onScroll:w}),u(T,{onResize:H})]),r=u("div",{class:C.value,style:Q.value,ref:e.container===!0?void 0:n,tabindex:-1},a);return e.container===!0?u("div",{class:"q-layout-container overflow-hidden",ref:n},[u(T,{onResize:R}),u("div",{class:"absolute-full",style:L.value},[u("div",{class:"scroll",style:f.value},[r])])]):r}}});export{G as Q,k as a,J as b,Y as c};
