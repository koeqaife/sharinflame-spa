import{j as v,a2 as b,D as h,E as c,k,o as w,w as D,m as i,l as r,H as $,Y as C,s as p,Q as V,ah as H}from"./index-Do0CBbdm.js";import{u as g}from"./use-dialog-plugin-component-5oIaZXWZ.js";import{_ as f}from"./MyButton.vue_vue_type_script_setup_true_lang-0geFim1q.js";const I={class:"dialog-content"},Q={class:"title"},R={class:"buttons horizontal-container"},N=v({__name:"ReportDialog",props:{targetType:{},targetId:{}},emits:[...g.emits],setup(m){const{dialogRef:o,onDialogHide:_}=g(),n=m,d=b(),{t:l}=h(),s=c(""),a=c(!1);async function y(){var e;a.value=!0;try{await H(s.value,n.targetId,n.targetType),d.notify({type:"default-notification",message:l("report_dialog.title"),caption:l("report_dialog.success"),progress:!0,icon:"sym_r_done_outline"}),(e=o.value)==null||e.hide()}catch{d.notify({type:"error-notification",message:l("report_dialog.failed"),progress:!0})}finally{a.value=!1}}return(e,t)=>(w(),k(V,{"transition-show":"scale","transition-hide":"scale",class:"report-dialog card-dialog",ref_key:"dialogRef",ref:o,onHide:p(_),maximized:""},{default:D(()=>[i("div",I,[i("div",Q,$(e.$t("report_dialog.title")),1),r(C,{borderless:"",modelValue:s.value,"onUpdate:modelValue":t[0]||(t[0]=u=>s.value=u),autogrow:"",maxlength:"512",label:e.$t("reason"),class:"full-width report-text card",disable:a.value},null,8,["modelValue","label","disable"]),i("div",R,[r(f,{label:e.$t("cancel"),type:"flat",icon:"close",onClick:t[1]||(t[1]=u=>p(o).hide()),disable:a.value},null,8,["label","disable"]),r(f,{label:e.$t("report"),type:"primary",icon:"report",onClick:y,loading:a.value},null,8,["label","loading"])])])]),_:1},8,["onHide"]))}});export{N as default};
