const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/MySpinner-BcRKf9B2.js","assets/index-C4T2bIgH.js","assets/index-DI-gpe9-.css"])))=>i.map(i=>d[i]);
import{j as de,E as n,W as N,h as S,F as fe,M as me,p as E,o as I,m as l,O,q as pe,a4 as r,s as y,l as c,t as _e,P as ye,H as V,aJ as U,bL as he,n as ge,Z as M,_ as Ce}from"./index-C4T2bIgH.js";import{_ as h}from"./MyButton.vue_vue_type_script_setup_true_lang-CYCpU-k_.js";const we=["onKeydown"],Pe=["src","poster"],ke={key:0,class:"center-overlay"},Me={key:1,class:"loader center-overlay"},Te={class:"top-row"},be={class:"title"},xe={class:"progress-row"},Se={class:"bottom-row"},Ee={class:"left"},Ie={class:"time"},Ve={class:"right"},Le=de({__name:"MyVideoPlayer",props:{src:{},poster:{},title:{},controlsHidden:{type:Boolean}},setup(W){var K;const j=_e(()=>Ce(()=>import("./MySpinner-BcRKf9B2.js"),__vite__mapDeps([0,1,2]))),g=W,o=n(null),C=n(null),B=n(null),v=n(!1),d=n(0),R=n(0),L=n(0),a=n(1),u=n(1),w=n(!1),F=n(!1),f=n(null),P=n(!0),m=n(!0),$=n(!1),T=n(!1);N(v,e=>{e&&($.value=!0)});const J=S(()=>w.value||a.value==0?"volume_off":a.value<.1?"volume_mute":a.value<.5?"volume_down":"volume_up"),X=g.title,Z=g.src,G=g.poster,D=(K=g.controlsHidden)!=null?K:!1;function Q(){k(),p()}function Y(){m.value=!0}function ee(){m.value=!1}function te(){m.value=!1}function ne(){m.value=!0}function H(e){if(!isFinite(e)||e<=0)return"0:00";const t=Math.floor(e/3600),s=Math.floor(e%3600/60),i=Math.floor(e%60),x=s.toString().padStart(2,"0"),_=i.toString().padStart(2,"0");return t>0?`${t}:${x}:${_}`:`${s}:${_}`}const oe=S(()=>H(R.value)),le=S(()=>H(d.value));function se(){const e=o.value;e&&(d.value=e.duration||0,F.value=!!document.pictureInPictureEnabled&&!!e.requestPictureInPicture)}function q(){const e=o.value;e&&(R.value=e.currentTime,L.value=d.value>0?e.currentTime/d.value*100:0)}function p(){const e=o.value;e&&(e.paused||e.ended?e.play().catch(()=>{}):e.pause())}function ae(){v.value=!0}function ue(){v.value=!1}function ie(e){var _;const t=(_=B.value)==null?void 0:_.getBoundingClientRect(),s=o.value;if(!t||!s)return;const i=e.clientX-t.left,x=Math.min(Math.max(i/t.width,0),1);s.currentTime=x*d.value,q()}function re(){const e=o.value;e&&(a.value=u.value,e.volume=a.value,w.value=e.volume===0)}function ce(){const e=o.value;e&&(a.value=e.volume,u.value=e.volume,w.value=e.muted||e.volume===0)}function z(){const e=o.value;e&&(e.muted=!e.muted,w.value=e.muted)}async function ve(){const e=o.value;if(e)try{document.pictureInPictureElement?await document.exitPictureInPicture():await e.requestPictureInPicture()}catch{}}function b(){var s,i;const e=C.value;if(!e)return;const t=document;t.fullscreenElement?((i=t.exitFullscreen)==null||i.call(t),T.value=!1):((s=e.requestFullscreen)==null||s.call(e).catch(()=>{}),T.value=!0)}function k(){P.value=!0,A()}function A(){D||(f.value&&clearTimeout(f.value),f.value=window.setTimeout(()=>{P.value=!1},3500))}return N(u,e=>{a.value=e,o.value&&(o.value.volume=e)}),fe(()=>{var t;const e=o.value;e&&(e.volume=a.value),P.value=!1,A(),(t=C.value)==null||t.addEventListener("focus",k)}),me(()=>{var t;f.value&&clearTimeout(f.value);const e=o.value;e&&(e.pause(),e.removeAttribute("src"),e.load(),e.remove()),(t=C.value)==null||t.removeEventListener("focus",k)}),(e,t)=>(I(),E("div",{class:"my-video-player",onMousemovePassive:k,onKeydown:[M(r(p,["prevent"]),["space"]),M(r(p,["prevent"]),["k"]),M(r(b,["prevent"]),["f"]),M(r(z,["prevent"]),["m"])],tabindex:"0",ref_key:"containerRef",ref:C},[l("div",{class:"video-stage",onClick:Q},[l("video",{ref_key:"videoRef",ref:o,src:y(Z),poster:y(G),onTimeupdate:q,onLoadedmetadata:se,onPlay:ae,onPause:ue,onVolumechange:ce,onDblclick:r(b,["prevent"]),onWaiting:Y,onPlaying:te,onCanplay:ee,onStalled:ne,playsinline:"",preload:"metadata"},null,40,Pe),v.value?m.value?(I(),E("div",Me,[c(y(j),{size:"55px"})])):pe("",!0):(I(),E("div",ke,[c(h,{class:"big-play",type:"flat",icon:"play_arrow",onClick:r(p,["stop"])})]))]),O(l("div",{class:ge(["controls",{hide:!P.value||!$.value}])},[l("div",Te,[l("div",be,V(y(X)),1)]),l("div",xe,[l("div",{class:"progress-bar-bg",onClick:ie,ref_key:"progressContainerRef",ref:B},[l("div",{class:"progress-played",style:U({width:L.value+"%"})},null,4)],512)]),l("div",Se,[l("div",Ee,[c(h,{class:"play-pause",onClick:p,icon:v.value?"pause":"play_arrow"},null,8,["icon"]),c(h,{class:"mute",icon:J.value,onClick:z},null,8,["icon"]),O(l("input",{class:"volume",type:"range",min:"0",max:"1",step:"0.01","onUpdate:modelValue":t[0]||(t[0]=s=>u.value=s),onInput:re,style:U({"--val":u.value*100+"%"})},null,36),[[he,u.value,void 0,{number:!0}]]),l("div",Ie,V(oe.value)+" / "+V(le.value),1)]),l("div",Ve,[c(h,{class:"pip",onClick:ve,disable:!F.value,icon:"picture_in_picture"},null,8,["disable"]),c(h,{class:"fullscreen-btn",onClick:b,icon:T.value?"fullscreen_exit":"fullscreen"},null,8,["icon"])])])],2),[[ye,!y(D)]])],40,we))}});export{Le as default};
