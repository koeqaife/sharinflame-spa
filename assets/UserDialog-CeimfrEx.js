const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/UserInfo-q_2Oa8hw.js","assets/index-C4T2bIgH.js","assets/index-DI-gpe9-.css","assets/QScrollArea-B4qUASNi.js","assets/QScrollObserver-CCXLn-AB.js","assets/format-DB5cN5E9.js","assets/MyButton.vue_vue_type_script_setup_true_lang-CYCpU-k_.js","assets/MyChip.vue_vue_type_script_setup_true_lang-TNJEhOIf.js","assets/UserPosts-B8AsNN0p.js","assets/QSpace-BZ_YrFTW.js","assets/MyVirtualScroll.vue_vue_type_script_setup_true_lang-DUszNFvO.js","assets/MySelect.vue_vue_type_script_setup_true_lang-qr1tape7.js","assets/QMenu-yq6Y8Uxc.js","assets/CategoryButtons.vue_vue_type_script_setup_true_lang-ClIpCsXR.js","assets/ClosePopup-DDTdMOkR.js","assets/RectSkeleton.vue_vue_type_script_setup_true_lang-BBTaAPgN.js","assets/PostComponent.vue_vue_type_script_setup_true_lang-BsUyNmfp.js","assets/i18n-t4jL-EMo.js","assets/ReactionButtons.vue_vue_type_script_setup_true_lang-D1Fm2LhF.js"])))=>i.map(i=>d[i]);
import{x as V,y as N,z as U,A as F,h as D,B as K,C as O,j,D as G,u as J,E as m,F as W,k as r,o,w as $,l as s,n as X,s as c,p as y,G as q,m as l,H as I,K as Y,q as Z,t as R,I as ee,Q as ae,_ as T,J as se,L as te}from"./index-C4T2bIgH.js";import{Q as oe}from"./QSpace-BZ_YrFTW.js";import{Q as le}from"./QScrollArea-B4qUASNi.js";import{u as E}from"./use-dialog-plugin-component-TMqOqiuh.js";import{_ as ne}from"./UserAvatar.vue_vue_type_script_setup_true_lang-BuI4Bnon.js";import{_ as ie}from"./CloseableContent.vue_vue_type_script_setup_true_lang-CuiGzT6X.js";import{_ as H}from"./CategoryButtons.vue_vue_type_script_setup_true_lang-ClIpCsXR.js";import{_ as k}from"./MyButton.vue_vue_type_script_setup_true_lang-CYCpU-k_.js";import{_ as w}from"./RectSkeleton.vue_vue_type_script_setup_true_lang-BBTaAPgN.js";import{_ as re}from"./MyImage.vue_vue_type_script_setup_true_lang-BQJiwxzL.js";import{u as ce}from"./profile-store-DHKuebLZ.js";import"./QScrollObserver-CCXLn-AB.js";import"./ClosePopup-DDTdMOkR.js";const ue=["text","rect","circle","QBtn","QBadge","QChip","QToolbar","QCheckbox","QRadio","QToggle","QSlider","QRange","QInput","QAvatar"],de=["wave","pulse","pulse-x","pulse-y","fade","blink","none"],fe=V({name:"QSkeleton",props:{...N,tag:{type:String,default:"div"},type:{type:String,validator:e=>ue.includes(e),default:"rect"},animation:{type:String,validator:e=>de.includes(e),default:"wave"},animationSpeed:{type:[String,Number],default:1500},square:Boolean,bordered:Boolean,size:String,width:String,height:String},setup(e,{slots:n}){const b=F(),u=U(e,b.proxy.$q),S=D(()=>{const _=e.size!==void 0?[e.size,e.size]:[e.width,e.height];return{"--q-skeleton-speed":`${e.animationSpeed}ms`,width:_[0],height:_[1]}}),v=D(()=>`q-skeleton q-skeleton--${u.value===!0?"dark":"light"} q-skeleton--type-${e.type}`+(e.animation!=="none"?` q-skeleton--anim q-skeleton--anim-${e.animation}`:"")+(e.square===!0?" q-skeleton--square":"")+(e.bordered===!0?" q-skeleton--bordered":""));return()=>K(e.tag,{class:v.value,style:S.value},O(n.default))}}),me=(e,n)=>Math.floor(Math.random()*(n-e+1))+e,pe=(e,n)=>`${me(e,n)}px`,ve={class:"profile-info"},_e={key:1,class:"card banner"},ge={class:"profile-inner"},he={class:"container name-container"},ye={class:"display-name"},ke={class:"username"},we={class:"profile-info"},be={class:"profile-inner"},Se={class:"container name-container"},Qe={class:"full-height full-width container"},He=j({__name:"UserDialog",props:{user:{},notSync:{type:Boolean}},emits:[...E.emits],setup(e){const n=R(()=>T(()=>import("./UserInfo-q_2Oa8hw.js"),__vite__mapDeps([0,1,2,3,4,5,6,7]))),b=R(()=>T(()=>import("./UserPosts-B8AsNN0p.js"),__vite__mapDeps([8,9,1,2,3,4,10,6,11,12,13,14,15,16,5,17,18,7]))),{dialogRef:u,onDialogHide:S}=E(),{t:v}=G(),_=J(),g=ce(),z=m({}),Q=m(!1),B=m(!1),x=m(!1),C=e,a=m(C.user),h=m("info"),P=D(()=>[{icon:"info",label:v("info"),click:()=>A("info"),type:"info"},{icon:"article",label:v("posts"),click:()=>A("posts"),type:"posts"}]);async function L(){const t=a.value.followed;try{t?(delete a.value.followed,await se(a.value.user_id)):(a.value.followed=!0,await te(a.value.user_id))}catch{t?a.value.followed=!0:delete a.value.followed}}const A=t=>{h.value=t};function M(){_.openDialog("settings","",{open:"my_account"})}return W(async()=>{var t,i,d,p;if(C.notSync)a.value=C.user,x.value=a.value.user_id==((t=g.profile)==null?void 0:t.user_id);else if(((i=a.value)==null?void 0:i.user_id)!=((d=g.profile)==null?void 0:d.user_id)){const f=await g.getProfile((p=a.value)==null?void 0:p.user_id);f&&(a.value=f)}else x.value=!0,a.value=await g.getProfile()||a.value;B.value=!0}),(t,i)=>(o(),r(ae,{"transition-show":"slide-up","transition-hide":"slide-down",class:"user-dialog card-dialog",ref_key:"dialogRef",ref:u,onHide:c(S),maximized:""},{default:$(()=>[s(ie,{onHide:i[1]||(i[1]=d=>c(u).hide()),class:X({expand:Q.value})},{default:$(()=>{var d,p;return[B.value?(o(),y(q,{key:0},[l("div",ve,[a.value.banner_url?(o(),r(re,{key:0,src:a.value.banner_url,class:"card banner"},null,8,["src"])):(o(),y("div",_e)),s(k,{class:"close",icon:"close",onClick:(d=c(u))==null?void 0:d.hide},null,8,["onClick"]),l("div",ge,[s(ne,{user:a.value},null,8,["user"]),l("div",he,[l("div",ye,I(a.value.display_name||a.value.username),1),l("div",ke,"@"+I(a.value.username),1)]),s(oe),x.value?(o(),r(k,{key:1,type:"primary",label:t.$t("edit"),"icon-right":"person_edit",class:"edit-profile-button",onClick:M},null,8,["label"])):(o(),r(k,{key:0,label:a.value.followed?t.$t("unfollow"):t.$t("follow"),icon:"add",class:"follow-button",type:a.value.followed?"outlined":"primary",onClick:L},null,8,["label","type"]))])]),s(H,{"categories-list":P.value,"current-type":h.value,"container-class":"horizontal-container card profile-categories q-mb-sm",style:{"z-index":"2"}},null,8,["categories-list","current-type"]),(o(),r(Y,null,[h.value=="info"?(o(),r(c(n),{key:0,user:a.value,meta:z.value},null,8,["user","meta"])):h.value=="posts"?(o(),r(c(b),{key:1,user:a.value,meta:z.value,expand:Q.value,"onUpdate:expand":i[0]||(i[0]=f=>Q.value=f)},null,8,["user","meta","expand"])):Z("",!0)],1024))],64)):(o(),y(q,{key:1},[l("div",we,[s(w,{class:"card banner"}),s(k,{class:"close",icon:"close",onClick:(p=c(u))==null?void 0:p.hide},null,8,["onClick"]),l("div",be,[s(fe,{type:"QAvatar",class:"avatar"}),l("div",Se,[s(w,{class:"display-name",width:"120px",height:"25px"}),s(w,{class:"username",width:"120px",height:"21px"})])])]),s(H,{"categories-list":P.value,"current-type":"",disabled:!0,"container-class":"horizontal-container card profile-categories q-mb-sm"},null,8,["categories-list"]),s(le,{class:"scroll-area full-height fix-scroll-area",visible:!1},{default:$(()=>[l("div",Qe,[(o(),y(q,null,ee(5,f=>s(w,{key:f,height:c(pe)(50,250),class:"card"},null,8,["height"])),64))])]),_:1})],64))]}),_:1},8,["class"])]),_:1},8,["onHide"]))}});export{He as default};
