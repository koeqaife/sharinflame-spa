import{j as D,E as s,h as g,F as $,M as L,W as N,p as i,o as c,O as _,m as V,q as y,P as k,l as w,G as T,I as S,v as F,aJ as I,n as R}from"./index-CFDL-CVp.js";import{_ as b}from"./MyButton.vue_vue_type_script_setup_true_lang-BrbV-gT4.js";const j={key:0,class:"pagination"},q=["onClick"],P=D({__name:"MyCarousel",props:{slides:{}},setup(x){const C=x,a=s(0),l=g(()=>C.slides.map((e,n)=>({index:n,data:e}))),v=s([0]),f=s(null),d=s(0),o=s(!1),m=s(0),t=s(0);function h(){d.value=f.value?f.value.clientWidth:window.innerWidth}$(()=>{h(),window.addEventListener("resize",h)}),L(()=>{window.removeEventListener("resize",h)}),N(a,()=>{t.value=0,v.value.push(a.value)});const M=g(()=>{let n=-a.value*d.value+(o.value,t.value);const u=o.value?"none":"transform 0.3s ease";n>0&&(n=0);const r=d.value*(l.value.length-1);return-n>r&&(n=-r),{transform:`translateX(${Math.round(n)}px)`,transition:u}});function X(e){l.value.length!=1&&e.touches.length===1&&(o.value=!0,m.value=e.touches[0].clientX,t.value=0)}function E(e){if(l.value.length==1||!o.value||e.touches.length!==1)return;const n=e.touches[0].clientX;t.value=n-m.value,t.value>0?v.value.push(a.value-1):t.value<0&&v.value.push(a.value+1),Math.abs(t.value)>8&&e.cancelable&&e.preventDefault()}function p(){if(l.value.length==1||!o.value)return;o.value=!1;const e=Math.max(40,d.value*.2);t.value<=-e&&a.value<l.value.length-1?a.value++:t.value>=e&&a.value>0&&a.value--,t.value=0}function W(){a.value<l.value.length-1&&a.value++}function z(){a.value>0&&a.value--}function B(e){e<0||e>=l.value.length||(a.value=e)}return(e,n)=>(c(),i("div",{class:"my-carousel","data-is-carousel":"1",ref_key:"carouselRef",ref:f,onTouchstart:X,onTouchmove:E,onTouchend:p,onTouchcancel:p},[_(w(b,{class:"prev-btn",type:"flat",icon:"chevron_left",onClick:z},null,512),[[k,l.value[a.value-1]!==void 0]]),V("div",{class:"slides-container",style:I(M.value)},[(c(!0),i(T,null,S(l.value,u=>(c(),i("div",{key:u.index,class:"slide-element"},[v.value.includes(u.index)?F(e.$slots,"default",{key:0,data:u.data}):y("",!0)]))),128))],4),_(w(b,{class:"next-btn",type:"flat",icon:"chevron_right",onClick:W},null,512),[[k,l.value[a.value+1]!==void 0]]),l.value.length>1?(c(),i("div",j,[(c(!0),i(T,null,S(l.value,(u,r)=>(c(),i("span",{key:r,class:R(["dot",{active:r===a.value}]),onClick:G=>B(r)},null,10,q))),128))])):y("",!0)],544))}});export{P as default};
